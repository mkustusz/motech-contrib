<div ng-show="!editMode" class="box-header">{{msg('aggregation.create.page.heading')}}
    <a href="#/" type="button" class="btn btn-sm btn-primary btn-in-header pull-right"><i class="icon-remove icon-white"></i></a>
</div>
<div ng-show="editMode" class="box-header">{{msg('aggregation.edit.page.heading')}}
    <a href="#/" type="button" class="btn btn-sm btn-primary btn-in-header pull-right"><i class="icon-remove icon-white"></i></a>
</div>

<div class="box-content inside clearfix" ng-controller="NewRulesController">

    <div ng-show="errors.length > 0" class="span12 alert alert-block alert-error">
        <div ng-include="'../event-aggregation/resources/partials/form_errors.html'"></div>
    </div>

    <div class="form-group"></div>

    <form class="form-horizontal rule-form col-sm-8">

        <div class="form-group" ng-show="!editMode">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.scheduleType') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <div class="btn-group">
                    <a class="btn btn-default dropdown-toggle" data-toggle="dropdown" href="#">
                        {{msg('aggregation.new.rule.' + scheduleType)}}
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li ng-repeat="scheduleType in scheduleTypeList">
                            <a href="#/rules/create/{{scheduleType}}" ng-click="changeScheduleType(scheduleType)">
                                {{msg('aggregation.new.rule.' + scheduleType)}}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.name.label') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <input class="input-xlarge-fluid form-control input-auto" type="text" ng-model="rule.name" server-validate />
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.description.label') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <textarea class="input-xlarge-fluid form-control input-auto" ng-model="rule.description"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.subscribe.to.label') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <input class="input-xlarge-fluid form-control input-auto" type="text" ng-model="rule.subscribedTo" />
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.fields.label') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <input class="input-xlarge-fluid form-control input-auto" type="text" id='tagsinput' ng-model='rule.fields' />
            </div>
        </div>

        <div class="form-group">
            <label class="col-md-3 col-sm-4 control-label">{{ msg('aggregation.new.rule.publish.as.label') }}</label>
            <div class="form-inline col-md-9 col-sm-8">
                <input class="input-xlarge-fluid form-control input-auto" type="text" ng-model="rule.publishAs" />
            </div>
        </div>

        <div ng-include="scheduleTypePartial"></div>

        <div class="form-group">
            <div class="col-md-offset-3 col-sm-offset-4 col-md-9 col-sm-8">
                <div class="checkbox">
                    <label class="">
                        <input type="checkbox" ng-model='rule.state' ng-true-value='paused' ng-false-value='running' id='rule_state'/>
                        {{ msg('aggregation.new.rule.start.paused.heading') }}
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-3 col-sm-offset-4 col-md-9 col-sm-8">
                <button class="btn btn-primary" ng-click="update(rule)">{{ msg('aggregation.new.rule.save.label') }}</button>
                <a type="button" href="#/" class="btn btn-default">{{msg('aggregation.new.rule.cancel.label')}}</a>
            </div>
        </div>
    </form>

</div>
