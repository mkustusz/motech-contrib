<div class="commcare">

    <div ng-show="formError" class="connection-status connection-error">
        {{msg('commcare.error.schema')}}
    </div>

    <div ng-repeat="application in applications">

        <h1>{{application.applicationName}}</h1>

        <div ng-repeat="module in application.modules">

            <fieldset>
                <legend>{{msg('commcare.module')}} {{$index+1}}</legend>

                <div ng-repeat="form in module.formSchemas">

                    <div class="form-schema-group">
                        <span>{{ form.formNames["en"] }}</span>
                        <button class="btn" data-toggle="modal" href="#form-schema-{{$parent.$index}}-{{$index}}">{{msg('commcare.view')}}</button>

                        <div id="form-schema-{{$parent.$index}}-{{$index}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>

                                {{msg('commcare.module')}}: <b>{{msg('commcare.module')}} {{$index+1}}</b>&nbsp;&nbsp;Form: <b>{{ form.formNames["en"] }}</b>
                            </div>

                            <div class="modal-body">
                                <p>{{msg('commcare.form.questions')}}:</p>
                                <table class="table table-striped">
                                    <tbody>
                                    <tr ng-repeat="question in form.questions">
                                        <td>{{question.questionLabel}}</td>
                                        <td>
                                            <table class="table table-bordered">
                                                <tr>
                                                    <td>{{msg('commcare.form.question.repeat')}}</td>
                                                    <td>{{question.questionRepeat}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{msg('commcare.form.question.tag')}}</td>
                                                    <td>{{question.questionTag}}</td>
                                                </tr>
                                                <tr>
                                                    <td>{{msg('commcare.form.question.value')}}</td>
                                                    <td>{{question.questionValue}}</td>
                                                </tr>
                                                <table ui-if="question.options.length" class="table table-bordered">
                                                    <tr>
                                                        <th>{{msg('commcare.form.option.label')}}</th>
                                                        <th>{{msg('commcare.form.option.value')}}</th>
                                                    </tr>
                                                    <tr ng-repeat="option in question.options">
                                                        <td>{{option.label}}</td>
                                                        <td>{{option.value}}</td>
                                                    </tr>
                                                </table>
                                            </table>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>

            </fieldset>

        </div>
    </div>

</div>
